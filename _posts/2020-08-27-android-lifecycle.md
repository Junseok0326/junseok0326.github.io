---
layout: post
title:  "Android - Life Cycle"
summary: 안드로이드 생명주기
author: 서준석
date: '2020-08-27 01:10:00'
category: android
thumbnail: /assets/img/android/thumbnail_lifecycle.png
keywords: android, lifecycle
permalink: /blog/android-lifecycle
---
# Life Cycle - 생명주기

<hr/>
<img src="../assets/img/android/activity_lifecycle.png" width=50%/>

## 1. 개념
* 우리는 앱을 시작하고 사용하며 종료하고 다시 되돌아가는 활동으로 앱의 상태를 변화시킨다. Activity 클래스는 이러한 활동의 상태 변화를 알아차릴 수 있는 여러가지 CallBack을 제공한다.
* 콜백을 통해 상태 변화에 적합한 특정 작업이 실행되며 적절한 전환 처리로 앱이 더욱 안정적인 기능을 가진다.
* 적절한 수명 주기 콜백의 이점
  * 앱을 사용하는 도중 다른 앱으로 전환할 때 비정상 종료되는 문제 해결
  * 장시간 미사용 앱을 통해 시스템 리소스가 낭비되는 문제 해결
  * 앱에서 잠시 나갔다 들어왔을 때 진행 상태가 저장되지 않는 문제 해결
  * 화면의 회전으로 인해 비정상 종료되거나 진행 상태가 초기화되는 문제 해결
* 활동의 복잡도에 따라, 모든 수명 주기 메서드를 구현할 필요가 없는 경우도 존재한다.
* 그러나, 사용자가 원하는 동작 방식을 위해 각각의 수명 주기 메서드를 이해하여 구현하는 것이 중요하다.


## 2. 수명 주기 콜백
* ### onCreate()
  * 시스템이 활동을 생성할 때 실행되는 것
  * 필수적으로 구현해야 한다.
  * Bundle Class 객체의 savedInstanceState 변수를 매개변수로 받는다.<br/>
  만일 이전 활동이 존재하지 않는다면 Bundle 객체의 값은 null이다.
  * 시작됨 상태가 되면 onStart()와 onResume() 메서드를 호출한다.
* ### onStart()
  * 활동이 시작됨 상태에 들어가면서 시스템이 호출하는 콜백
  * 활동이 사용자에게 표시되며 앱은 활동을 foregorund에 보내 상호작용을 할 수 있도록 준비한다.
  * 매우 빠르게 완료되고, 시작됨 상태에 머무리지 않으며 이 콜백이 완료되면 재개됨 상태에 들어가 onResume() 메서드를 호출한다.
* ### onResume()
  * 활동이 재개됨 상태에 들어가며 foreground에 표시되며 시스템이 호출하는 콜백
  * 앱이 사용자와 상호작용한다.
  * 다른 이벤트가 발생하여 앱에서 포커스가 떠날 때까지 앱이 해당 상태에 머무른다.
  * 재개됨 상태로 전환되면 이 활동의 수명 주기와 연결된 모든 수명 주기 인식 구성요소는 ON_RESUME 이벤트를 수신한다.
  * 방해되는 이벤트가 발생하면 일시중지  상태에 들어가고 시스템이 onPause() 메서드를 호출한다.
* ### onPause()
  * 사용자가 활동을 떠나는 것을 나타내는 첫 번째 신호로 호출되는 콜백
  * 사용자의 활동이 foreground에 있지 않게 되었다는 것을 나타낸다.(다만 멀티 윈도우 모드에 있을 경우 여전히 표시 될 수도 있다.)
  * Activity가 일시중지됨 상태일 때 계속 실행되어서는 안되지만 잠시후 다시 시작할 작업을 일시중지하거나 조정가능하다.
  * 해당 상태와 연결된 구성요소는 ON_PAUSE 이벤트를 수신한다.
  * 구성요소가 foreground에 존재하지 않을 때 실행할 필요가 없는 기능을 모두 정지할 수 있다.
  * 일시정지를 통해 배터리 수명에 영향을 미칠 수 있는 모든 리소스를 해제 가능하다.
  * 멀티 윈도우 모드를 더욱 잘 지원하기 위해 UI 관련 리소스와 작업을 완전히 해제하거나 조정하려면 onStop()을 사용하는 것이 좋다.
  * 짦은 실행 시간 때문에 앱 또는 사용자 데이터를 저장, 네트워크 호출, 데이터베이스 트랜젝션을 실행하기에는 시간이 부족하여 실행해서는 안된다.
  * 부하가 큰 작업의 종료는 onStop() 상태일 때 실행해야 한다. 
* ### onStop()
  * 활동이 사용자에게 더 이상 표시되지 않으며 중단됨 상태에 들어가 시스템이 호출하는 콜백
  * 해당 상태와 연결된 구성요소는 ON_STOP 이벤트를 수신한다.
  * 이 메서드를 통해 CPU를 비교적 많이 소모하는 종료 작업을 실행한다.
  * 활동이 중단됨 상태에 진입하면 Activity 객체는 메모리 안에 머무른다.
  * 활동이 다시 시작되면 시스템은 onRestart()를 호출한다.
  * Activity가 실행을 종료하면 시스템은 onDestroy()를 호출한다.
* ### onDestroy()
  * 활동이 소멸되지 전에 호출된다.
  * onDestroy() 호출 조건
    * 사용자가 활동을 완전히 닫거나 finish()가 호출되어 활동이 종료되는 경우
    * 기기 회전이나 멀티윈도우 모드로 인한 구성 변경때문에 시스템이 일시적으로 활동을 소멸시키는 경우
    * 해당 상태와 연결된 구성요소는 ON_DESTROY 이벤트를 수신한다.
    * isFinishing()을 통해 Acitivity가 종료되었는지 알 수 있다.
    * ViewModel이 onCleared()를 호출해 활동이 소멸되기 전에 모든 데이터를 정리해야 한다.

* 참고 사이트
  * [Android Developers](https://developer.android.com/guide/components/activities/activity-lifecycle?hl=ko)